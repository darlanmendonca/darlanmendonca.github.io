function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(e){"use strict";function t(){var e=H.splice(0,H.length);for(ze=0;e.length;)e.shift().call(null,e.shift())}function n(e,t){for(var n=0,r=e.length;n<r;n++)h(e[n],t)}function r(e){for(var t,n=0,r=e.length;n<r;n++)t=e[n],N(t,re[o(t)])}function a(e){return function(t){Ie(t)&&(h(t,e),n(t.querySelectorAll(ae),e))}}function o(e){var t=qe.call(e,"is"),n=e.nodeName.toUpperCase(),r=le.call(ne,t?J+t.toUpperCase():$+n);return t&&-1<r&&!l(n,t)?-1:r}function l(e,t){return-1<ae.indexOf(e+'[is="'+t+'"]')}function i(e){var t=e.currentTarget,n=e.attrChange,r=e.attrName,a=e.target,o=e[Z]||2,l=e[z]||3;!$e||a&&a!==t||!t[q]||"style"===r||e.prevValue===e.newValue&&(""!==e.newValue||n!==o&&n!==l)||t[q](r,n===o?null:e.prevValue,n===l?null:e.newValue)}function u(e){var n=a(e);return function(e){H.push(n,e.target),ze&&clearTimeout(ze),ze=setTimeout(t,1)}}function c(e){Qe&&(Qe=!1,e.currentTarget.removeEventListener(W,c)),n((e.target||_).querySelectorAll(ae),e.detail===V?V:F),ke&&f()}function s(e,t){var n=this;Be.call(n,e,t),b.call(n,{target:n})}function m(e,t){_e(e,t),w?w.observe(e,Ze):(We&&(e.setAttribute=s,e[P]=C(e),e[I](Q,b)),e[I](K,i)),e[X]&&$e&&(e.created=!0,e[X](),e.created=!1)}function f(){for(var e,t=0,n=Fe.length;t<n;t++)e=Fe[t],oe.contains(e)||(n--,Fe.splice(t--,1),h(e,V))}function p(e){throw new Error("A "+e+" type is already registered")}function h(e,t){var n,r=o(e);-1<r&&(O(e,re[r]),r=0,t!==F||e[F]?t!==V||e[V]||(e[F]=!1,e[V]=!0,r=1):(e[V]=!1,e[F]=!0,r=1,ke&&le.call(Fe,e)<0&&Fe.push(e)),r&&(n=e[t+R])&&n.call(e))}function d(){}function E(e,t,n){var r=n&&n[U]||"",a=t.prototype,o=Ne(a),l=t.observedAttributes||me,i={prototype:o};Pe(o,X,{value:function(){if(ye)ye=!1;else if(!this[Te]){this[Te]=!0,new t(this),a[X]&&a[X].call(this);var e=Ce[Ae.get(t)];(!Me||e.create.length>1)&&L(this)}}}),Pe(o,q,{value:function(e){-1<le.call(l,e)&&a[q].apply(this,arguments)}}),a[j]&&Pe(o,x,{value:a[j]}),a[B]&&Pe(o,Y,{value:a[B]}),r&&(i[U]=r),e=e.toUpperCase(),Ce[e]={constructor:t,create:r?[r,Oe(e)]:[e]},Ae.set(t,e),_[k](e.toLowerCase(),i),M(e),we[e].r()}function v(e){var t=Ce[e.toUpperCase()];return t&&t.constructor}function T(e){return"string"==typeof e?e:e&&e.is||""}function L(e){for(var t,n=e[q],r=n?e.attributes:me,a=r.length;a--;)t=r[a],n.call(e,t.name||t.nodeName,null,t.value||t.nodeValue)}function M(e){return e=e.toUpperCase(),e in we||(we[e]={},we[e].p=new be(function(t){we[e].r=t})),we[e].p}function g(){Le&&delete e.customElements,se(e,"customElements",{configurable:!0,value:new d}),se(e,"CustomElementRegistry",{configurable:!0,value:d});for(var t=function(t){var n=e[t];if(n){e[t]=function(e){var t,r;return e||(e=this),e[Te]||(ye=!0,t=Ce[Ae.get(e.constructor)],r=Me&&1===t.create.length,e=r?Reflect.construct(n,me,t.constructor):_.createElement.apply(_,t.create),e[Te]=!0,ye=!1,r||L(e)),e},e[t].prototype=n.prototype;try{n.prototype.constructor=e[t]}catch(r){ve=!0,se(n,Te,{value:e[t]})}}},n=S.get(/^HTML[A-Z]*[a-z]/),r=n.length;r--;t(n[r]));_.createElement=function(e,t){var n=T(t);return n?Ye.call(this,e,Oe(n)):Ye.call(this,e)}}var H,b,y,C,w,A,O,N,_=e.document,D=e.Object,S=function(e){var t,n,r,a,o=/^[A-Z]+[a-z]/,l=function(e){var t,n=[];for(t in u)e.test(t)&&n.push(t);return n},i=function(e,t){t=t.toLowerCase(),t in u||(u[e]=(u[e]||[]).concat(t),u[t]=u[t.toUpperCase()]=e)},u=(D.create||D)(null),c={};for(n in e)for(a in e[n])for(r=e[n][a],u[a]=r,t=0;t<r.length;t++)u[r[t].toLowerCase()]=u[r[t].toUpperCase()]=a;return c.get=function(e){return"string"==typeof e?u[e]||(o.test(e)?[]:""):l(e)},c.set=function(e,t){return o.test(e)?i(e,t):i(t,e),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}}),k="registerElement",P="__"+k+(1e5*e.Math.random()>>0),I="addEventListener",F="attached",R="Callback",V="detached",U="extends",q="attributeChanged"+R,x=F+R,j="connected"+R,B="disconnected"+R,X="created"+R,Y=V+R,Z="ADDITION",G="MODIFICATION",z="REMOVAL",K="DOMAttrModified",W="DOMContentLoaded",Q="DOMSubtreeModified",$="<",J="=",ee=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,te=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],ne=[],re=[],ae="",oe=_.documentElement,le=ne.indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},ie=D.prototype,ue=ie.hasOwnProperty,ce=ie.isPrototypeOf,se=D.defineProperty,me=[],fe=D.getOwnPropertyDescriptor,pe=D.getOwnPropertyNames,he=D.getPrototypeOf,de=D.setPrototypeOf,Ee=!!D.__proto__,ve=!1,Te="__dreCEv1",Le=e.customElements,Me=!!(Le&&Le.define&&Le.get&&Le.whenDefined),ge=D.create||D,He=e.Map||function(){var e,t=[],n=[];return{get:function(e){return n[le.call(t,e)]},set:function(r,a){e=le.call(t,r),e<0?n[t.push(r)-1]=a:n[e]=a}}},be=e.Promise||function(e){function t(e){for(r=!0;n.length;)n.shift()(e)}var n=[],r=!1,a={"catch":function(){return a},then:function(e){return n.push(e),r&&setTimeout(t,1),a}};return e(t),a},ye=!1,Ce=ge(null),we=ge(null),Ae=new He,Oe=String,Ne=D.create||function tt(e){return e?(tt.prototype=e,new tt):this},_e=de||(Ee?function(e,t){return e.__proto__=t,e}:pe&&fe?function(){function e(e,t){for(var n,r=pe(t),a=0,o=r.length;a<o;a++)n=r[a],ue.call(e,n)||se(e,n,fe(t,n))}return function(t,n){do e(t,n);while((n=he(n))&&!ce.call(n,t));return t}}():function(e,t){for(var n in t)e[n]=t[n];return e}),De=e.MutationObserver||e.WebKitMutationObserver,Se=(e.HTMLElement||e.Element||e.Node).prototype,ke=!ce.call(Se,oe),Pe=ke?function(e,t,n){return e[t]=n.value,e}:se,Ie=ke?function(e){return 1===e.nodeType}:function(e){return ce.call(Se,e)},Fe=ke&&[],Re=Se.attachShadow,Ve=Se.cloneNode,Ue=Se.dispatchEvent,qe=Se.getAttribute,xe=Se.hasAttribute,je=Se.removeAttribute,Be=Se.setAttribute,Xe=_.createElement,Ye=Xe,Ze=De&&{attributes:!0,characterData:!0,attributeOldValue:!0},Ge=De||function(e){We=!1,oe.removeEventListener(K,Ge)},ze=0,Ke=!1,We=!0,Qe=!0,$e=!0;if(k in _||(de||Ee?(O=function(e,t){ce.call(t,e)||m(e,t)},N=m):(O=function(e,t){e[P]||(e[P]=D(!0),m(e,t))},N=O),ke?(We=!1,function(){var e=fe(Se,I),t=e.value,n=function(e){var t=new CustomEvent(K,{bubbles:!0});t.attrName=e,t.prevValue=qe.call(this,e),t.newValue=null,t[z]=t.attrChange=2,je.call(this,e),Ue.call(this,t)},r=function(e,t){var n=xe.call(this,e),r=n&&qe.call(this,e),a=new CustomEvent(K,{bubbles:!0});Be.call(this,e,t),a.attrName=e,a.prevValue=n?r:null,a.newValue=t,n?a[G]=a.attrChange=1:a[Z]=a.attrChange=0,Ue.call(this,a)},a=function(e){var t,n=e.currentTarget,r=n[P],a=e.propertyName;r.hasOwnProperty(a)&&(r=r[a],t=new CustomEvent(K,{bubbles:!0}),t.attrName=r.name,t.prevValue=r.value||null,t.newValue=r.value=n[a]||null,null==t.prevValue?t[Z]=t.attrChange=0:t[G]=t.attrChange=1,Ue.call(n,t))};e.value=function(e,o,l){e===K&&this[q]&&this.setAttribute!==r&&(this[P]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,t.call(this,"propertychange",a)),t.call(this,e,o,l)},se(Se,I,e)}()):De||(oe[I](K,Ge),oe.setAttribute(P,1),oe.removeAttribute(P),We&&(b=function(e){var t,n,r,a=this;if(a===e.target){t=a[P],a[P]=n=C(a);for(r in n){if(!(r in t))return y(0,a,r,t[r],n[r],Z);if(n[r]!==t[r])return y(1,a,r,t[r],n[r],G)}for(r in t)if(!(r in n))return y(2,a,r,t[r],n[r],z)}},y=function(e,t,n,r,a,o){var l={attrChange:e,currentTarget:t,attrName:n,prevValue:r,newValue:a};l[o]=e,i(l)},C=function(e){for(var t,n,r={},a=e.attributes,o=0,l=a.length;o<l;o++)t=a[o],n=t.name,"setAttribute"!==n&&(r[n]=t.value);return r})),_[k]=function(e,t){if(l=e.toUpperCase(),Ke||(Ke=!0,De?(w=function(e,t){function n(e,t){for(var n=0,r=e.length;n<r;t(e[n++]));}return new De(function(r){for(var a,o,l,i=0,u=r.length;i<u;i++)a=r[i],"childList"===a.type?(n(a.addedNodes,e),n(a.removedNodes,t)):(o=a.target,$e&&o[q]&&"style"!==a.attributeName&&(l=qe.call(o,a.attributeName),l!==a.oldValue&&o[q](a.attributeName,a.oldValue,l)))})}(a(F),a(V)),A=function(e){return w.observe(e,{childList:!0,subtree:!0}),e},A(_),Re&&(Se.attachShadow=function(){return A(Re.apply(this,arguments))})):(H=[],_[I]("DOMNodeInserted",u(F)),_[I]("DOMNodeRemoved",u(V))),_[I](W,c),_[I]("readystatechange",c),Se.cloneNode=function(e){var t=Ve.call(this,!!e),n=o(t);return-1<n&&N(t,re[n]),e&&r(t.querySelectorAll(ae)),t}),-2<le.call(ne,J+l)+le.call(ne,$+l)&&p(e),!ee.test(l)||-1<le.call(te,l))throw new Error("The type "+e+" is invalid");var l,i,s=function(){return f?_.createElement(h,l):_.createElement(h)},m=t||ie,f=ue.call(m,U),h=f?t[U].toUpperCase():l;return f&&-1<le.call(ne,$+h)&&p(h),i=ne.push((f?J:$)+l)-1,ae=ae.concat(ae.length?",":"",f?h+'[is="'+e.toLowerCase()+'"]':h),s.prototype=re[i]=ue.call(m,"prototype")?m.prototype:Ne(Se),n(_.querySelectorAll(ae),F),s},_.createElement=Ye=function(e,t){var n=T(t),r=n?Xe.call(_,e,Oe(n)):Xe.call(_,e),a=""+e,o=le.call(ne,(n?J:$)+(n||a).toUpperCase()),i=-1<o;return n&&(r.setAttribute("is",n=n.toLowerCase()),i&&(i=l(a.toUpperCase(),n))),$e=!_.createElement.innerHTMLHelper,i&&N(r,re[o]),r}),d.prototype={constructor:d,define:Me?function(e,t,n){if(n)E(e,t,n);else{var r=e.toUpperCase();Ce[r]={constructor:t,create:[r]},Ae.set(t,r),Le.define(e,t)}}:E,get:Me?function(e){return Le.get(e)||v(e)}:v,whenDefined:Me?function(e){return be.race([Le.whenDefined(e),M(e)])}:M},Le)try{!function(t,n,r){if(n[U]="a",t.prototype=Ne(HTMLAnchorElement.prototype),t.prototype.constructor=t,e.customElements.define(r,t,n),qe.call(_.createElement("a",{is:r}),"is")!==r||Me&&qe.call(new t,"is")!==r)throw n}(function nt(){return Reflect.construct(HTMLAnchorElement,[],nt)},{},"document-register-element-a")}catch(Je){g()}else g();try{Xe.call(_,"a","a")}catch(et){Oe=function(e){return{is:e}}}}(window);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),MnImage=function(e){function t(e){var n,r;return _classCallCheck(this,t),e=n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.setImage(),n.setOutline(),n.setRotation(),n.setBlur(),n.setClick(),r=e,_possibleConstructorReturn(n,r)}return _inherits(t,e),_createClass(t,[{key:"setOutline",value:function(){"A"===this.parentElement.tagName&&this.parentElement.classList.add("no-outline")}},{key:"setImage",value:function(){function e(e){var n=e.hasOwnProperty("default"),a=t.getAttribute(e.name);if(n){var o=e.hasOwnProperty("values")&&e.values.indexOf(a)>=0,l=o?a:e["default"];r.setAttribute(e.name,l)}else a&&r.setAttribute(e.name,a)}var t=this,n=[{name:"src"},{name:"alt"},{name:"title"},{name:"draggable"}],r=document.createElement("img");n.map(e),this.appendChild(r)}},{key:"setRotation",value:function(){function e(e){if("A"===this.parentElement.tagName){var t=this.getBoundingClientRect(),n=e.type.startsWith("touch"),r=n?e.touches[0].clientX:e.clientX,a=n?e.touches[0].clientY:e.clientY,o=(r-t.left)/t.width,l=(a-t.top)/t.height,i=20,u=i*(2*-o)+i,c=i*(2*l)-i;this.style.transform="\n          scale(1.07)\n          perspective(1000px)\n          rotateY("+u+"deg)\n          rotateX("+c+"deg)\n        "}}function t(){this.style.transform=""}this.addEventListener("mouseenter",e),this.addEventListener("mousemove",e),this.addEventListener("mouseleave",t)}},{key:"setBlur",value:function(){function e(){this.blur()}"A"===this.parentElement.tagName&&(this.parentElement.addEventListener("click",e),this.parentElement.addEventListener("mouseleave",e),this.parentElement.addEventListener("touchmove",e))}},{key:"setClick",value:function(){function e(){var e=this.querySelector("mn-image");n=e.style.transform;var t=e.style.transform.replace("scale(1.07)","scale(1.03)").replace(/rotateX(.+)/,"rotateX(0)").replace(/rotateY(.+)/,"rotateY(0)");e.style.transform=t}function t(){var e=this.querySelector("mn-image");e.style.transform=n}"A"===this.parentElement.tagName&&(this.parentElement.addEventListener("mousedown",e),this.parentElement.addEventListener("mouseup",t));var n=void 0}}]),t}(HTMLElement);customElements.define("mn-image",MnImage);